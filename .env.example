# ============================================
# Multi-Chain Arbitrage Bot Configuration
# Version 3.10 - Rate Limit Resilience & Staggered Startup
# ============================================
#
# ARCHITECTURE: All chains are ENABLED by default.
# To disable a chain, set {CHAIN}_ENABLED=false
#
# Example: OPTIMISM_ENABLED=false will disable Optimism
#
# Chains: BSC, Ethereum, Polygon, Arbitrum, Base, Avalanche, Optimism, Fantom, zkSync
#
# v3.10 IMPROVEMENTS:
# - Staggered worker startup to prevent 429 thundering herd
# - Enhanced WebSocket connection retry with 429 detection
# - Immediate rate limit rollover (no wasted retries on 429s)
# - Monthly capacity tracking for Alchemy endpoints
# - Priority given to free public RPC endpoints over Alchemy
#

# ============================================
# GLOBAL SETTINGS
# ============================================

# Node environment: development or production
NODE_ENV=development

# Debug mode (verbose logging)
DEBUG_MODE=false

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Save logs to file
LOG_TO_FILE=true

# Enable dynamic gas price fetching
DYNAMIC_GAS=true

# ============================================
# MULTI-CHAIN MODE
# ============================================

# Explicit multi-chain mode (auto-detected if >1 chain enabled)
# MULTI_CHAIN_MODE=true

# Worker threads enabled
WORKERS_ENABLED=true

# Maximum worker threads (one per chain)
MAX_WORKERS=9

# Worker timeout in ms
WORKER_TIMEOUT=30000

# Worker restart delay in ms
WORKER_RESTART_DELAY=5000

# v3.10: Staggered worker startup to prevent thundering herd on RPC endpoints
# Without staggering, all workers hit the same endpoints simultaneously causing 429s
WORKER_STARTUP_DELAY_MS=3000
WORKER_STARTUP_JITTER_MS=1000

# ============================================
# CROSS-CHAIN ARBITRAGE
# ============================================

# Enable cross-chain detection (finds same asset price differences across chains)
CROSS_CHAIN_ENABLED=true

# Minimum profit for cross-chain opportunities
CROSS_CHAIN_MIN_PROFIT=5

# Maximum price age in ms for cross-chain comparison
CROSS_CHAIN_PRICE_AGE=5000

# Minimum spread percentage for cross-chain
CROSS_CHAIN_MIN_SPREAD=0.3

# ============================================
# GLOBAL DETECTION PARAMETERS
# ============================================

# Minimum profit percentage to consider (before gas/fees)
MIN_PROFIT_PERCENTAGE=0.5

# Maximum slippage tolerance (percentage)
MAX_SLIPPAGE=1.0

# Default gas price in Gwei (used if dynamic fetch fails)
GAS_PRICE_GWEI=5

# ============================================
# GLOBAL EXECUTION CONFIGURATION
# ============================================

# Enable trade execution (false = detection only)
EXECUTION_ENABLED=false

# Execution mode: 'simulation' or 'live'
EXECUTION_MODE=simulation

# Global wallet private key (chain-specific overrides below)
# WARNING: NEVER commit this! Keep it secret!
PRIVATE_KEY=

# Minimum net profit in USD to execute (after all fees)
MIN_PROFIT_USD=1.0

# Maximum gas price in Gwei (abort if higher)
MAX_GAS_PRICE_GWEI=10

# Slippage tolerance for trades (percentage)
SLIPPAGE_TOLERANCE=1.0

# ============================================
# TRIANGULAR ARBITRAGE
# ============================================

# Enable triangular arbitrage detection (global default)
TRIANGULAR_ENABLED=true

# Minimum liquidity per pool in USD
TRIANGULAR_MIN_LIQUIDITY=5000

# Maximum trade size in USD
TRIANGULAR_MAX_TRADE=5000

# ============================================
# V3 (CONCENTRATED LIQUIDITY) SETTINGS
# ============================================

# Enable V3 DEX detection (global default)
V3_ENABLED=true

# Minimum liquidity for V3 pools in USD
V3_MIN_LIQUIDITY=3000

# Minimum profit for V3 arbitrage (percentage)
V3_MIN_PROFIT=0.2

# ============================================
# MEMPOOL MONITORING (MEV)
# ============================================

# Enable mempool monitoring (requires special RPC)
MEMPOOL_ENABLED=false

# Minimum swap size to track in USD
MEMPOOL_MIN_SWAP_SIZE=10000

# ============================================
# ALERTS
# ============================================

# Discord webhook URL for notifications
DISCORD_WEBHOOK_URL=

# Telegram bot configuration
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Alert cooldown in ms (prevent spam)
ALERT_COOLDOWN_MS=60000

# ============================================
# PERFORMANCE & CACHING
# ============================================

# Maximum token pairs to monitor (global default)
MAX_PAIRS_TO_MONITOR=250

# Cache size for price data
CACHE_SIZE=2000

# Block processing timeout in ms
BLOCK_PROCESSING_TIMEOUT_MS=5000

# Max RPC requests per minute (rate limiting)
MAX_RPC_RPM=300

# v3.10: Minimum interval between RPC requests in ms (burst prevention)
RPC_MIN_REQUEST_INTERVAL_MS=50

# Price cache TTL in seconds
PRICE_CACHE_TTL=60

# Max stale blocks to accept for cached data
MAX_STALE_BLOCKS=3

# ============================================
# WEBSOCKET RESILIENCE (v3.10)
# ============================================

# Initial connection timeout in ms (increased for slow endpoints)
WS_INITIAL_TIMEOUT_MS=15000

# Number of retries for initial WebSocket connection
WS_INITIAL_RETRIES=3

# Delay between initial connection retries in ms
WS_INITIAL_RETRY_DELAY_MS=2000

# Heartbeat interval in ms (application-level ping)
WS_HEARTBEAT_INTERVAL_MS=15000

# Heartbeat timeout in ms
WS_HEARTBEAT_TIMEOUT_MS=5000

# Base delay for reconnection with exponential backoff
WS_RECONNECT_BASE_DELAY_MS=2000

# Maximum reconnection delay
WS_RECONNECT_MAX_DELAY_MS=120000

# Maximum reconnection attempts before circuit breaker trips
WS_MAX_RECONNECT_ATTEMPTS=10

# Circuit breaker cooldown in ms (how long before retry after trip)
WS_CIRCUIT_BREAKER_COOLDOWN_MS=300000

# Proactive connection refresh interval in ms (prevent stale connections)
WS_PROACTIVE_REFRESH_MS=1800000

# ============================================
# BSC (Binance Smart Chain) - Chain ID: 56
# ============================================

# Enable/disable BSC (default: enabled)
# BSC_ENABLED=false

# v3.10: FREE public RPC endpoints are now built into the chain config
# and prioritized over Alchemy to preserve monthly quotas.
# The following are OPTIONAL - only set if you have premium API keys.

# RPC Endpoints - Alchemy (optional, used as backup after free endpoints)
BSC_ALCHEMY_HTTP=
BSC_ALCHEMY_WS=

# RPC Endpoints - Additional backups (optional)
BSC_RPC_HTTP_1=
BSC_RPC_HTTP_2=
BSC_RPC_WS_1=

# Legacy Alchemy variables (backward compatibility)
ALCHEMY_RPC_URL=
ALCHEMY_WS_URL=

# Trading parameters
BSC_MIN_PROFIT=0.5
BSC_MAX_SLIPPAGE=1.0
BSC_GAS_PRICE=5

# Execution
BSC_EXECUTION_ENABLED=false
BSC_EXECUTION_MODE=simulation
BSC_FLASH_CONTRACT=
BSC_PRIVATE_KEY=
BSC_MIN_PROFIT_USD=1.0
BSC_MAX_GAS_PRICE=10
BSC_SLIPPAGE_TOLERANCE=1.0

# Monitoring
BSC_MAX_PAIRS=250
BSC_CACHE_SIZE=2000
BSC_BLOCK_TIMEOUT=2500
BSC_MAX_RPC_RPM=300

# Triangular
BSC_TRIANGULAR_ENABLED=true
BSC_TRIANGULAR_MIN_LIQUIDITY=5000
BSC_TRIANGULAR_MAX_TRADE=5000

# V3
BSC_V3_ENABLED=true
BSC_V3_MIN_LIQUIDITY=3000
BSC_V3_MIN_PROFIT=0.2

# ============================================
# ETHEREUM MAINNET - Chain ID: 1
# ============================================

# Enable/disable Ethereum (default: enabled)
# ETH_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
ETH_ALCHEMY_HTTP=
ETH_ALCHEMY_WS=

# RPC Endpoints - Backup
ETH_RPC_HTTP_1=
ETH_RPC_WS_1=

# Trading parameters
ETH_MIN_PROFIT=0.3
ETH_MAX_SLIPPAGE=0.5
ETH_GAS_PRICE=30

# Execution
ETH_EXECUTION_ENABLED=false
ETH_EXECUTION_MODE=simulation
ETH_FLASH_CONTRACT=
ETH_PRIVATE_KEY=
ETH_MIN_PROFIT_USD=10.0
ETH_MAX_GAS_PRICE=100
ETH_SLIPPAGE_TOLERANCE=0.5

# Monitoring
ETH_MAX_PAIRS=150
ETH_CACHE_SIZE=1500
ETH_BLOCK_TIMEOUT=10000
ETH_MAX_RPC_RPM=300

# Triangular
ETH_TRIANGULAR_ENABLED=true
ETH_TRIANGULAR_MIN_LIQUIDITY=50000
ETH_TRIANGULAR_MAX_TRADE=10000

# V3
ETH_V3_ENABLED=true
ETH_V3_MIN_LIQUIDITY=20000
ETH_V3_MIN_PROFIT=0.15

# ============================================
# POLYGON - Chain ID: 137
# ============================================

# Enable/disable Polygon (default: enabled)
# POLYGON_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
POLYGON_ALCHEMY_HTTP=
POLYGON_ALCHEMY_WS=

# RPC Endpoints - Backup
POLYGON_RPC_HTTP_1=
POLYGON_RPC_WS_1=

# Trading parameters
POLYGON_MIN_PROFIT=0.15
POLYGON_MAX_SLIPPAGE=1.0
POLYGON_GAS_PRICE=50

# Execution
POLYGON_EXECUTION_ENABLED=false
POLYGON_EXECUTION_MODE=simulation
POLYGON_FLASH_CONTRACT=
POLYGON_PRIVATE_KEY=
POLYGON_MIN_PROFIT_USD=0.50
POLYGON_MAX_GAS_PRICE=200
POLYGON_SLIPPAGE_TOLERANCE=1.0

# Monitoring
POLYGON_MAX_PAIRS=200
POLYGON_CACHE_SIZE=1500
POLYGON_BLOCK_TIMEOUT=1800
POLYGON_MAX_RPC_RPM=300

# Triangular
POLYGON_TRIANGULAR_ENABLED=true
POLYGON_TRIANGULAR_MIN_LIQUIDITY=5000
POLYGON_TRIANGULAR_MAX_TRADE=5000

# V3
POLYGON_V3_ENABLED=true
POLYGON_V3_MIN_LIQUIDITY=3000
POLYGON_V3_MIN_PROFIT=0.1

# ============================================
# ARBITRUM ONE - Chain ID: 42161
# ============================================

# Enable/disable Arbitrum (default: enabled)
# ARBITRUM_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
ARBITRUM_ALCHEMY_HTTP=
ARBITRUM_ALCHEMY_WS=

# RPC Endpoints - Backup
ARBITRUM_RPC_HTTP_1=
ARBITRUM_RPC_WS_1=

# Trading parameters
ARBITRUM_MIN_PROFIT=0.08
ARBITRUM_MAX_SLIPPAGE=0.5
ARBITRUM_GAS_PRICE=0.1

# Execution
ARBITRUM_EXECUTION_ENABLED=false
ARBITRUM_EXECUTION_MODE=simulation
ARBITRUM_FLASH_CONTRACT=
ARBITRUM_PRIVATE_KEY=
ARBITRUM_MIN_PROFIT_USD=0.50
ARBITRUM_MAX_GAS_PRICE=1
ARBITRUM_SLIPPAGE_TOLERANCE=0.5

# Monitoring
ARBITRUM_MAX_PAIRS=200
ARBITRUM_CACHE_SIZE=1500
ARBITRUM_BLOCK_TIMEOUT=200
ARBITRUM_MAX_RPC_RPM=300

# Triangular
ARBITRUM_TRIANGULAR_ENABLED=true
ARBITRUM_TRIANGULAR_MIN_LIQUIDITY=10000
ARBITRUM_TRIANGULAR_MAX_TRADE=10000

# V3
ARBITRUM_V3_ENABLED=true
ARBITRUM_V3_MIN_LIQUIDITY=5000
ARBITRUM_V3_MIN_PROFIT=0.08

# ============================================
# BASE - Chain ID: 8453
# ============================================

# Enable/disable Base (default: enabled)
# BASE_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
BASE_ALCHEMY_HTTP=
BASE_ALCHEMY_WS=

# RPC Endpoints - Backup
BASE_RPC_HTTP_1=
BASE_RPC_WS_1=

# Trading parameters
BASE_MIN_PROFIT=0.05
BASE_MAX_SLIPPAGE=0.5
BASE_GAS_PRICE=0.01

# Execution
BASE_EXECUTION_ENABLED=false
BASE_EXECUTION_MODE=simulation
BASE_FLASH_CONTRACT=
BASE_PRIVATE_KEY=
BASE_MIN_PROFIT_USD=0.20
BASE_MAX_GAS_PRICE=1
BASE_SLIPPAGE_TOLERANCE=0.5

# Monitoring
BASE_MAX_PAIRS=150
BASE_CACHE_SIZE=1000
BASE_BLOCK_TIMEOUT=1500
BASE_MAX_RPC_RPM=300

# Triangular
BASE_TRIANGULAR_ENABLED=true
BASE_TRIANGULAR_MIN_LIQUIDITY=5000
BASE_TRIANGULAR_MAX_TRADE=5000

# V3
BASE_V3_ENABLED=true
BASE_V3_MIN_LIQUIDITY=3000
BASE_V3_MIN_PROFIT=0.08

# ============================================
# AVALANCHE C-CHAIN - Chain ID: 43114
# ============================================

# Enable/disable Avalanche (default: enabled)
# AVALANCHE_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
AVALANCHE_ALCHEMY_HTTP=
AVALANCHE_ALCHEMY_WS=

# RPC Endpoints - Backup
AVALANCHE_RPC_HTTP_1=
AVALANCHE_RPC_WS_1=

# Trading parameters
AVALANCHE_MIN_PROFIT=0.3
AVALANCHE_MAX_SLIPPAGE=1.0
AVALANCHE_GAS_PRICE=25

# Execution
AVALANCHE_EXECUTION_ENABLED=false
AVALANCHE_EXECUTION_MODE=simulation
AVALANCHE_FLASH_CONTRACT=
AVALANCHE_PRIVATE_KEY=
AVALANCHE_MIN_PROFIT_USD=1.0
AVALANCHE_MAX_GAS_PRICE=50
AVALANCHE_SLIPPAGE_TOLERANCE=1.0

# Monitoring
AVALANCHE_MAX_PAIRS=200
AVALANCHE_CACHE_SIZE=1500
AVALANCHE_BLOCK_TIMEOUT=1800
AVALANCHE_MAX_RPC_RPM=300

# Triangular
AVALANCHE_TRIANGULAR_ENABLED=true
AVALANCHE_TRIANGULAR_MIN_LIQUIDITY=5000
AVALANCHE_TRIANGULAR_MAX_TRADE=5000

# V3
AVALANCHE_V3_ENABLED=true
AVALANCHE_V3_MIN_LIQUIDITY=3000
AVALANCHE_V3_MIN_PROFIT=0.15

# ============================================
# OPTIMISM - Chain ID: 10
# ============================================

# Enable/disable Optimism (default: enabled)
# OPTIMISM_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
OPTIMISM_ALCHEMY_HTTP=
OPTIMISM_ALCHEMY_WS=

# RPC Endpoints - Backup
OPTIMISM_RPC_HTTP_1=

# Trading parameters
OPTIMISM_MIN_PROFIT=0.1
OPTIMISM_MAX_SLIPPAGE=0.5
OPTIMISM_GAS_PRICE=0.001

# Execution
OPTIMISM_EXECUTION_ENABLED=false
OPTIMISM_EXECUTION_MODE=simulation
OPTIMISM_FLASH_CONTRACT=
OPTIMISM_PRIVATE_KEY=
OPTIMISM_MIN_PROFIT_USD=0.5
OPTIMISM_MAX_GAS_PRICE=1
OPTIMISM_SLIPPAGE_TOLERANCE=0.5

# Monitoring
OPTIMISM_MAX_PAIRS=200
OPTIMISM_CACHE_SIZE=1500
OPTIMISM_BLOCK_TIMEOUT=2000
OPTIMISM_MAX_RPC_RPM=300

# Triangular
OPTIMISM_TRIANGULAR_ENABLED=true
OPTIMISM_TRIANGULAR_MIN_LIQUIDITY=3000
OPTIMISM_TRIANGULAR_MAX_TRADE=5000

# V3
OPTIMISM_V3_ENABLED=true
OPTIMISM_V3_MIN_LIQUIDITY=2000
OPTIMISM_V3_MIN_PROFIT=0.1

# ============================================
# FANTOM OPERA - Chain ID: 250
# ============================================

# Enable/disable Fantom (default: enabled)
# FANTOM_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
FANTOM_ALCHEMY_HTTP=
FANTOM_ALCHEMY_WS=

# RPC Endpoints - Backup
FANTOM_RPC_HTTP_1=

# Trading parameters
FANTOM_MIN_PROFIT=0.15
FANTOM_MAX_SLIPPAGE=0.5
FANTOM_GAS_PRICE=50

# Execution
FANTOM_EXECUTION_ENABLED=false
FANTOM_EXECUTION_MODE=simulation
FANTOM_FLASH_CONTRACT=
FANTOM_PRIVATE_KEY=
FANTOM_MIN_PROFIT_USD=0.5
FANTOM_MAX_GAS_PRICE=200
FANTOM_SLIPPAGE_TOLERANCE=0.5

# Monitoring
FANTOM_MAX_PAIRS=250
FANTOM_CACHE_SIZE=2000
FANTOM_BLOCK_TIMEOUT=1000
FANTOM_MAX_RPC_RPM=300

# Triangular
FANTOM_TRIANGULAR_ENABLED=true
FANTOM_TRIANGULAR_MIN_LIQUIDITY=2000
FANTOM_TRIANGULAR_MAX_TRADE=3000

# NOTE: Fantom has no major V3 DEXes - V3 disabled

# ============================================
# ZKSYNC ERA - Chain ID: 324
# ============================================

# Enable/disable zkSync (default: enabled)
# ZKSYNC_ENABLED=false

# RPC Endpoints - Alchemy (recommended)
ZKSYNC_ALCHEMY_HTTP=
ZKSYNC_ALCHEMY_WS=

# RPC Endpoints - Backup
ZKSYNC_RPC_HTTP_1=

# Trading parameters
ZKSYNC_MIN_PROFIT=0.15
ZKSYNC_MAX_SLIPPAGE=0.5
ZKSYNC_GAS_PRICE=0.25

# Execution
ZKSYNC_EXECUTION_ENABLED=false
ZKSYNC_EXECUTION_MODE=simulation
ZKSYNC_FLASH_CONTRACT=
ZKSYNC_PRIVATE_KEY=
ZKSYNC_MIN_PROFIT_USD=0.5
ZKSYNC_MAX_GAS_PRICE=1
ZKSYNC_SLIPPAGE_TOLERANCE=0.5

# Monitoring
ZKSYNC_MAX_PAIRS=150
ZKSYNC_CACHE_SIZE=1000
ZKSYNC_BLOCK_TIMEOUT=1500
ZKSYNC_MAX_RPC_RPM=300

# Triangular
ZKSYNC_TRIANGULAR_ENABLED=true
ZKSYNC_TRIANGULAR_MIN_LIQUIDITY=2000
ZKSYNC_TRIANGULAR_MAX_TRADE=3000

# NOTE: zkSync has no standard V3 DEXes - V3 disabled

# ============================================
# BLOCK EXPLORER API KEYS (Contract Verification)
# ============================================

BSCSCAN_API_KEY=
ETHERSCAN_API_KEY=
POLYGONSCAN_API_KEY=
ARBISCAN_API_KEY=
BASESCAN_API_KEY=
SNOWTRACE_API_KEY=
OPTIMISTIC_ETHERSCAN_API_KEY=
FTMSCAN_API_KEY=
# zkSync Explorer uses different verification method

# ============================================
# EVENT-DRIVEN DETECTION (ADVANCED)
# ============================================

# Enable real-time Sync event monitoring (faster than block polling)
EVENT_DRIVEN_ENABLED=true

# Enable aggregator integration (1inch, Paraswap)
AGGREGATOR_ENABLED=false

# Enable whale tracking (mempool alternative)
WHALE_TRACKING_ENABLED=true

# Enable statistical arbitrage detection
STATISTICAL_ARB_ENABLED=true

# ============================================
# END OF CONFIGURATION
# ============================================
